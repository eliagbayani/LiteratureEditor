<?php 
$subjects = array(
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#TaxonBiology", "t" => "Overview › Brief Summary"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Description", "t" => "Overview › Comprehensive Description > Description"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#GeneralDescription", "t" => "Overview › Comprehensive Description > General Description"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Biology", "t" => "Overview › Comprehensive Description > Biology"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Distribution", "t" => "Overview › Distribution"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Morphology", "t" => "Physical Description › Morphology"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Size", "t" => "Physical Description › Size"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#DiagnosticDescription", "t" => "Physical Description › Diagnostic Description"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#LookAlikes", "t" => "Physical Description › Look Alikes"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#Development", "t" => "Physical Description › Development"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Habitat", "t" => "Ecology › Habitat"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Migration", "t" => "Ecology › Migration"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Dispersal", "t" => "Ecology › Dispersal"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#TrophicStrategy", "t" => "Ecology › Trophic Strategy"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Associations", "t" => "Ecology › Associations"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Diseases", "t" => "Ecology › Diseases and Parasites"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#PopulationBiology", "t" => "Ecology › Population Biology"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Ecology", "t" => "Ecology › General Ecology"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Behaviour", "t" => "Life History and Behavior › Behavior"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Cyclicity", "t" => "Life History and Behavior › Cyclicity"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#LifeCycle", "t" => "Life History and Behavior › Life Cycle"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#LifeExpectancy", "t" => "Life History and Behavior › Life Expectancy"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Reproduction", "t" => "Life History and Behavior › Reproduction"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Growth", "t" => "Life History and Behavior › Growth"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Evolution", "t" => "Evolution and Systematics › Evolution"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#FossilHistory", "t" => "Evolution and Systematics › Fossil History"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#SystematicsOrPhylogenetics", "t" => "Evolution and Systematics › Systematics or Phylogenetics"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#FunctionalAdaptations", "t" => "Evolution and Systematics › Functional Adaptations"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Physiology", "t" => "Physiology and Cell Biology › Physiology"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Cytology", "t" => "Physiology and Cell Biology › Cell Biology"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Genetics", "t" => "Molecular Biology and Genetics › Genetics"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#Genome", "t" => "Molecular Biology and Genetics › Genome"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#MolecularBiology", "t" => "Molecular Biology and Genetics › Molecular Biology"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#Barcode", "t" => "Molecular Biology and Genetics › Molecular Biology > Barcode"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#ConservationStatus", "t" => "Conservation › Conservation Status"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Conservation", "t" => "Conservation › Conservation"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Trends", "t" => "Conservation › Trends"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Procedures", "t" => "Conservation › Threats > Procedures"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Threats", "t" => "Conservation › Threats"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Management", "t" => "Conservation › Management"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Use", "t" => "Relevance to Humans and Ecosystems › Benefits"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#RiskStatement", "t" => "Relevance to Humans and Ecosystems › Risks"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#Notes", "t" => "Notes"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#Taxonomy", "t" => "Names and Taxonomy › Taxonomy"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#TypeInformation", "t" => "Names and Taxonomy › Type Information"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#EducationResources", "t" => "Education Resources"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#Education", "t" => "Education"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#CitizenScience", "t" => "Citizen Science Links"), 
array("url" => "http://rs.tdwg.org/ontology/voc/SPMInfoItems#Key", "t" => "Identification Resources > Key"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#IdentificationResources", "t" => "Identification Resources"), 
array("url" => "http://eol.org/schema/eol_info_items.xml#NucleotideSequences", "t" => "Nucleotide Sequences"));
$subject_type = "http://rs.tdwg.org/ontology/voc/SPMInfoItems#GeneralDescription"; //default value
if(isset($url_params['subject_type']))
{
    if($val = $url_params['subject_type']) $subject_type = $val;
}
//====================================================
$audiences = array(
    array("value" => "Everyone",        "t" => "Everyone"),
    array("value" => "General public",  "t" => "General public"),
    array("value" => "Expert users",    "t" => "Expert users"),
    array("value" => "Children",        "t" => "Children"));
$audience_type = "Everyone"; //default value
if(isset($url_params['audience_type']))
{
    if($val = $url_params['audience_type']) $audience_type = $val;
}
//====================================================
$licenses = array(
    array("value" => "http://creativecommons.org/licenses/by/3.0/",       "t" => "CC BY"),
    array("value" => "http://creativecommons.org/licenses/by-nc/3.0/",    "t" => "CC BY NC"),
    array("value" => "http://creativecommons.org/licenses/by-sa/3.0/",    "t" => "CC BY SA"),
    array("value" => "http://creativecommons.org/licenses/by-nc-sa/3.0/", "t" => "CC BY NC SA"),
    array("value" => "http://creativecommons.org/licenses/publicdomain/", "t" => "Puclic Domain"),
    array("value" => "no known copyright restrictions",                   "t" => "no known copyright restrictions")
    );
$license_type = self::get_license_type($license_url, $copyrightstatus); //default is based on specs from mapping doc.
if(isset($url_params['license_type']))
{
    if($val = $url_params['license_type']) $license_type = $val;
}

echo "<br>[$license_type]</br>";

//====================================================
$bibliographicCitation = self::get_bibliographicCitation($title_id, $Page, $title);
//====================================================

if(isset($params))
{
    if($val = @$params['subject_type']) $subject_type = $val;
    if($val = @$params['audience_type']) $audience_type = $val;
    if($val = @$params['license_type']) $license_type = $val;
}
//====================================================
?>

<form action="../bhl_access/index.php">
    <input type="hidden" name="page_id" value="<?php echo $Page->PageID ?>">
    <input type="hidden" name="item_id" value="<?php echo $Page->ItemID ?>">
    <input type="hidden" name="title_id" value="<?php echo $title_id ?>">
    <input type="hidden" name="pass_title" value="<?php echo urlencode($pass_title) ?>">
    <input type="hidden" name="search_type" value="move2wiki">
    <input type="hidden" name="licensor" value="<?php echo $licensor ?>">
    <input type="hidden" name="bibliographicCitation" value="<?php echo $bibliographicCitation ?>">
    
    <table border="0">
        <tr>
            <td>Bibliographic Citation (computed):</td>
            <td><?php echo $bibliographicCitation ?></td>
        </tr>
        <tr>
            <td>Subject:</td>
            <td>
                <select name="subject_type" id="selectmenu">
                    <?php foreach($subjects as $s)
                    {
                        $selected = "";
                        if($subject_type == $s['url']) $selected = "selected";
                        echo '<option value="' . $s['url'] . '" ' . $selected . '>' . $s['t'] . '</option>';
                    }?>
                </select>
            </td>
        </tr>
        
        <tr>
            <td>License:</td>
            <td>
                <select name="license_type" id="selectmenu_3">
                    <option></option>
                    <?php foreach($licenses as $s)
                    {
                        $selected = "";
                        if($license_type == $s['value']) $selected = "selected";
                        echo '<option value="' . $s['value'] . '" ' . $selected . '>' . $s['t'] . '</option>';
                    }?>
                </select>
            </td>
        </tr>

        <tr>
            <td>Audience:</td>
            <td>
                <select name="audience_type" id="selectmenu_2">
                    <?php foreach($audiences as $s)
                    {
                        $selected = "";
                        if($audience_type == $s['value']) $selected = "selected";
                        echo '<option value="' . $s['value'] . '" ' . $selected . '>' . $s['t'] . '</option>';
                    }?>
                </select>
            </td>
        </tr>

        <tr><td colspan="2" align="center"><button id="button_move2wiki"><?php echo $submit_text ?></button></td></tr>
    </table>
    
</form>
